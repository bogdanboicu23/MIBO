image:
  repository: registry.digitalocean.com/mibo/identity-service
  tag: test-fix-amd64

replicaCount: 1

service:
  type: ClusterIP
  port: 8080

env:
  - name: ConnectionStrings__DefaultConnection
    valueFrom:
      secretKeyRef:
        name: database-secret
        key: connection-string
  - name: ASPNETCORE_ENVIRONMENT
    value: "Development"
  - name: ASPNETCORE_URLS
    value: "http://+:8080"
  - name: Jwt__Key
    valueFrom:
      secretKeyRef:
        name: identity-secrets
        key: jwt-key
  - name: Jwt__Issuer
    value: "MIBO.IdentityService"
  - name: Jwt__Audience
    value: "MIBO.Services"
  - name: JwtSettings__AccessTokenSecret
    valueFrom:
      secretKeyRef:
        name: identity-secrets
        key: jwt-key
  - name: JwtSettings__RefreshTokenSecret
    valueFrom:
      secretKeyRef:
        name: identity-secrets
        key: refresh-token-key
  - name: JwtSettings__Issuer
    value: "MIBO.IdentityService"
  - name: JwtSettings__Audience
    value: "MIBO.Services"
  - name: JwtSettings__AccessTokenExpirationMinutes
    value: "15"
  - name: JwtSettings__RefreshTokenExpirationDays
    value: "7"
  - name: Turnstile__SecretKey
    valueFrom:
      secretKeyRef:
        name: identity-secrets
        key: turnstile-secret
  - name: Turnstile__Enabled
    value: "true"

resources:
  requests:
    memory: "128Mi"
    cpu: "100m"
  limits:
    memory: "256Mi"
    cpu: "250m"